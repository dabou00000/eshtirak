# سيناريوهات اختبار النظام

## اختبارات المصادقة

### 1. تسجيل الدخول
- [ ] تسجيل الدخول بحساب صحيح
- [ ] تسجيل الدخول بحساب غير صحيح
- [ ] تسجيل الدخول بكلمة مرور خاطئة
- [ ] تسجيل الخروج
- [ ] إنشاء حساب جديد (أول مرة)

### 2. إنشاء الاشتراك الافتراضي
- [ ] إنشاء tenant جديد تلقائياً
- [ ] تحميل الإعدادات الافتراضية
- [ ] تحديث اسم الاشتراك

## اختبارات إدارة المشتركين

### 3. إضافة مشترك
- [ ] إضافة مشترك بجميع البيانات
- [ ] إضافة مشترك بالحد الأدنى من البيانات (الاسم فقط)
- [ ] إضافة مشترك مكرر
- [ ] التحقق من صحة البيانات

### 4. تعديل مشترك
- [ ] تعديل اسم المشترك
- [ ] تعديل رقم الهاتف
- [ ] تعديل العنوان
- [ ] تعديل رقم العداد

### 5. حذف مشترك
- [ ] حذف مشترك بدون وصولات
- [ ] محاولة حذف مشترك له وصولات
- [ ] تأكيد الحذف

### 6. البحث والتصفية
- [ ] البحث بالاسم
- [ ] البحث برقم الهاتف
- [ ] البحث بنص جزئي

## اختبارات الوصولات

### 7. إنشاء وصل بالدولار
```
البيانات:
- المشترك: محمد علي
- الشهر: 2025-01
- العداد السابق: 1200
- العداد الحالي: 1260
- سعر الكيلو واط: 0.45 USD
- المقطوعية: 6 USD
- دفعة إضافية: 3 USD (متأخرات)
- سعر الصرف: 90000

النتائج المتوقعة:
- الاستهلاك: 60 كيلو واط
- كلفة الطاقة: 27 USD
- المجموع الجزئي: 33 USD
- المجموع النهائي: 36 USD
- المجموع بالليرة: 3,240,000 ل.ل
```

### 8. إنشاء وصل بالليرة
```
البيانات:
- المشترك: فاطمة أحمد
- الشهر: 2025-01
- العداد السابق: 800
- العداد الحالي: 850
- سعر الكيلو واط: 40000 LBP
- المقطوعية: 300000 LBP
- سعر الصرف: 90000

النتائج المتوقعة:
- الاستهلاك: 50 كيلو واط
- كلفة الطاقة: 2,000,000 ل.ل
- المجموع النهائي: 2,300,000 ل.ل
- المجموع بالدولار: 25.56 USD
```

### 9. إنشاء وصل ثنائي العملة
```
البيانات:
- المشترك: علي حسن
- الشهر: 2025-01
- العداد السابق: 1500
- العداد الحالي: 1580
- سعر الكيلو واط USD: 0.50
- سعر الكيلو واط LBP: 45000
- المقطوعية: 8 USD
- سعر الصرف: 90000

النتائج المتوقعة:
- الاستهلاك: 80 كيلو واط
- كلفة الطاقة USD: 40 USD
- كلفة الطاقة LBP: 3,600,000 ل.ل
- المجموع USD: 48 USD
- المجموع LBP: 3,600,000 ل.ل
```

### 10. حالات خطأ في الوصولات
- [ ] العداد الحالي أصغر من السابق
- [ ] سعر الكيلو واط صفر أو سالب
- [ ] عدم اختيار مشترك
- [ ] عدم إدخال الشهر
- [ ] سعر الصرف صفر أو سالب

### 11. تعديل وحذف الوصولات
- [ ] تعديل وصل موجود
- [ ] حذف وصل
- [ ] معاينة الوصل
- [ ] طباعة الوصل

## اختبارات النفقات

### 12. إضافة نفقات
- [ ] إضافة نفقة مازوت بالدولار
- [ ] إضافة نفقة مازوت بالليرة
- [ ] إضافة نفقة أخرى
- [ ] إضافة نفقة بدون وصف

### 13. تعديل وحذف النفقات
- [ ] تعديل نفقة موجودة
- [ ] حذف نفقة
- [ ] تصفية النفقات حسب الشهر

## اختبارات التقارير

### 14. تقرير شهري شامل
```
البيانات:
- الشهر: 2025-01
- وصولات: 3 وصلات (36 + 25.56 + 48 = 109.56 USD)
- نفقات: مازوت 120 USD
- سعر الصرف: 90000

النتائج المتوقعة:
- إجمالي الوصولات: 109.56 USD / 9,860,400 ل.ل
- إجمالي النفقات: 120 USD / 10,800,000 ل.ل
- الصافي: -10.44 USD / -939,600 ل.ل (خسارة)
```

### 15. تصدير التقرير
- [ ] تصدير CSV
- [ ] التحقق من صحة البيانات في الملف
- [ ] فتح الملف في Excel

## اختبارات الإعدادات

### 16. تحديث الإعدادات
- [ ] تغيير اسم الاشتراك
- [ ] تغيير العنوان والهاتف
- [ ] تغيير العملة الافتراضية
- [ ] تغيير سعر الصرف
- [ ] تغيير إعدادات التقريب
- [ ] تغيير قالب الطباعة

### 17. الحفظ التلقائي
- [ ] تغيير إعداد وحفظ تلقائي
- [ ] ظهور مؤشر الحفظ
- [ ] التحقق من الحفظ في قاعدة البيانات

## اختبارات الطباعة

### 18. طباعة وصل A5
- [ ] معاينة الوصل
- [ ] طباعة على ورق A5
- [ ] التحقق من التنسيق
- [ ] التحقق من صحة البيانات

### 19. طباعة وصل 80mm
- [ ] تغيير قالب الطباعة إلى 80mm
- [ ] معاينة الوصل
- [ ] طباعة على طابعة حرارية
- [ ] التحقق من التنسيق

### 20. طباعة تقرير
- [ ] طباعة تقرير شهري
- [ ] التحقق من التنسيق
- [ ] التحقق من صحة البيانات

## اختبارات الأمان

### 21. قواعد Firestore
- [ ] محاولة الوصول بدون تسجيل دخول
- [ ] محاولة الوصول بحساب مختلف
- [ ] التحقق من حماية البيانات

### 22. التحقق من صحة البيانات
- [ ] إدخال بيانات غير صحيحة
- [ ] التحقق من رسائل الخطأ
- [ ] منع الحفظ ببيانات خاطئة

## اختبارات الأداء

### 23. تحميل البيانات
- [ ] تحميل المشتركين
- [ ] تحميل الوصولات
- [ ] تحميل النفقات
- [ ] تحميل الإعدادات

### 24. البحث والتصفية
- [ ] بحث سريع في المشتركين
- [ ] تصفية الوصولات
- [ ] تصفية النفقات

## اختبارات الاستجابة

### 25. الهواتف المحمولة
- [ ] عرض على شاشة صغيرة
- [ ] التمرير والتنقل
- [ ] النوافذ المنبثقة
- [ ] الطباعة من الهاتف

### 26. الأجهزة اللوحية
- [ ] عرض على شاشة متوسطة
- [ ] التخطيط المتجاوب
- [ ] التفاعل باللمس

## اختبارات العمل بدون إنترنت

### 27. Firebase Offline
- [ ] قطع الاتصال بالإنترنت
- [ ] قراءة البيانات المحفوظة
- [ ] محاولة حفظ بيانات جديدة
- [ ] إعادة الاتصال والمزامنة

## اختبارات التكامل

### 28. التكامل مع Firebase
- [ ] المصادقة
- [ ] قاعدة البيانات
- [ ] المزامنة
- [ ] النسخ الاحتياطي

### 29. التكامل مع المتصفح
- [ ] دعم ES6 Modules
- [ ] دعم Local Storage
- [ ] دعم IndexedDB
- [ ] دعم الطباعة

## قائمة التحقق النهائية

### 30. التحقق من جميع الميزات
- [ ] جميع التبويبات تعمل
- [ ] جميع النماذج تعمل
- [ ] جميع الحسابات صحيحة
- [ ] جميع التقارير دقيقة
- [ ] جميع الطباعات صحيحة
- [ ] جميع الرسائل واضحة
- [ ] جميع الأخطاء معالجة
- [ ] جميع التحسينات تعمل

## ملاحظات الاختبار

### بيانات الاختبار المقترحة
```
المشتركين:
1. محمد علي - 70 123 456 - بيروت
2. فاطمة أحمد - 71 234 567 - طرابلس
3. علي حسن - 72 345 678 - صيدا

الوصولات:
- شهر يناير 2025
- شهر فبراير 2025
- شهر مارس 2025

النفقات:
- مازوت شهري
- نفقات صيانة
- نفقات أخرى
```

### أدوات الاختبار
- Chrome DevTools
- Firebase Console
- Excel/Google Sheets للتحقق من CSV
- طابعة للاختبار الفعلي

### معايير النجاح
- جميع الوظائف تعمل بدون أخطاء
- جميع الحسابات صحيحة
- جميع التقارير دقيقة
- الطباعة تعمل بشكل صحيح
- الواجهة سريعة ومتجاوبة
- الأمان محقق


